/**
   * @license MIT
   * VanillaRouter.js
   * https://github.com/Adison-Masih/vanillarouter
   * Depends On http://buunguyen.github.io/topbar (Included in this file)
   * Copyright 2022 - Adison Masih
*/
(function(e,t){"use strict";function repaint(){r.width=e.innerWidth,r.height=5*s.barThickness;var t=r.getContext("2d");t.shadowBlur=s.shadowBlur,t.shadowColor=s.shadowColor;var o,n=t.createLinearGradient(0,0,r.width,0);for(o in s.barColors)n.addColorStop(o,s.barColors[o]);t.lineWidth=s.barThickness,t.beginPath(),t.moveTo(0,s.barThickness/2),t.lineTo(Math.ceil(a*r.width),s.barThickness/2),t.strokeStyle=n,t.stroke()}!function(){for(var t=0,r=["ms","moz","webkit","o"],o=0;o<r.length&&!e.requestAnimationFrame;++o)e.requestAnimationFrame=e[r[o]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[r[o]+"CancelAnimationFrame"]||e[r[o]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(r,o){var n=(new Date).getTime(),a=Math.max(0,16-(n-t)),i=e.setTimeout((function(){r(n+a)}),a);return t=n+a,i}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}();var r,o,n,a,i,s={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)",className:null},l={config:function(e){for(var t in e)s.hasOwnProperty(t)&&(s[t]=e[t])},show:function(){var c,d,h;i||(i=!0,null!==n&&e.cancelAnimationFrame(n),r||((h=(r=t.createElement("canvas")).style).position="fixed",h.top=h.left=h.right=h.margin=h.padding=0,h.zIndex=100001,h.display="none",s.className&&r.classList.add(s.className),t.body.appendChild(r),c="resize",d=repaint,(h=e).addEventListener?h.addEventListener(c,d,!1):h.attachEvent?h.attachEvent("on"+c,d):h.onresize=d),r.style.opacity=1,r.style.display="block",l.progress(0),s.autoRun&&function loop(){o=e.requestAnimationFrame(loop),l.progress("+"+.05*Math.pow(1-Math.sqrt(a),2))}())},progress:function(e){return void 0===e||("string"==typeof e&&(e=(0<=e.indexOf("+")||0<=e.indexOf("-")?a:0)+parseFloat(e)),a=1<e?1:e,repaint()),a},hide:function(){i&&(i=!1,null!=o&&(e.cancelAnimationFrame(o),o=null),function loop(){return 1<=l.progress("+.1")&&(r.style.opacity-=.05,r.style.opacity<=.05)?(r.style.display="none",void(n=null)):void(n=e.requestAnimationFrame(loop))}())}};"object"==typeof module&&"object"==typeof module.exports?module.exports=l:"function"==typeof define&&define.amd?define((function(){return l})):this.topbar=l}).call(this,window,document);class VanillaRouter{constructor({useTopBar:e=!0,topBarConfig:t="none",isProduction:r=!1}={}){try{if(window.usingRouter=!0,this.replaceRlinks(),this.app=document.getElementsByTagName("routable")[0],this.title=document.getElementsByTagName("title")[0],this.usingTopBar=e,this.mostCurrentRoute="/",window.addEventListener("popstate",this.handlePopState),e){let e=document.createElement("SCRIPT");document.head.insertBefore(e,document.querySelector("[router]")),setTimeout((()=>{topbar.config("none"==t?{autoRun:!0,barThickness:1.2,barColors:{0:"#407ee3",".25":"#407ee3",".50":"#407ee3",".75":"#407ee3","1.0":"#407ee3"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   0)"}:t)}),44)}let r=new URLSearchParams(window.location.search);this.isRouted=r.get("routed")??!1;let o=document.createElement("ROUTE-STYLES");document.head.appendChild(o),this.styleParent=o,this.abspath="/",this.events={},this.events.onDropLoad=()=>{};document.querySelector("direct");setTimeout((()=>{this.isRouted||document.querySelectorAll("routed").forEach(((e,t)=>{e.parentNode.removeChild(e)}))}),.1),this.parser=new DOMParser,window.addEventListener("DOMContentLoaded",(()=>{this.domLoadedProcesses()}))}catch(e){this.production||console.error(e)}}onDropLoad(e){this.events.onDropLoad=e}onNavigate(e){this.events.onNavigate=e}processDropIncludes(){try{document.querySelectorAll("drop[name]:not(.resolved)").forEach((async(e,t)=>{let r=e.getAttribute("abs")?`${this.abspath}${e.getAttribute("name")}.drop`:e.getAttribute("name")+".drop";await fetch(r).then((async t=>{try{let r=await t.text();e.parentElement?e.outerHTML=r:e.innerHTML=r}catch(e){this.production||console.error(e)}})).then((()=>{this.domLoadedProcesses(),this.events.onDropLoad&&this.events.onDropLoad(r.replace(".drop","")),e.removeAttribute("name"),e.addClass("resolved")}))}))}catch(e){this.production||console.error(e)}}domLoadedProcesses(){try{this.replaceRlinks(),this.replaceRABSlinks(),this.attachEventsToRlinks(),this.processDropIncludes()}catch(e){this.production||console.error(e)}}replaceRlinks(){try{document.querySelectorAll("rlink[href]").forEach(((e,t)=>{let r=e.getAttribute("href"),o=document.createElement("A");o.setAttribute("href",r),o.setAttribute("stateful","true"),o.innerHTML=e.innerHTML,e.parentElement.appendChild(o),e.parentElement.removeChild(e)}))}catch(e){this.production||console.error(e)}}replaceRABSlinks(){try{document.querySelectorAll("rlink[abshref]").forEach(((e,t)=>{let r=e.getAttribute("abshref"),o=document.createElement("A");o.setAttribute("href",`${this.abspath}${r}`),o.setAttribute("stateful",""),o.innerHTML=e.innerHTML,e.parentElement.appendChild(o),e.parentElement.removeChild(e)}))}catch(e){this.production||console.error(e)}}attachEventsToRlinks(){document.querySelectorAll("a[stateful]").forEach(((e,t)=>{e.addEventListener("click",(async t=>{t.preventDefault();let r=e.getAttribute("href");await router.to(r).then((()=>{try{this.domLoadedProcesses()}catch(e){this.production||console.error(e)}}))}))}))}emptyStyles(){document.querySelector("route-styles").innerHTML=""}changeTitle(e=""){this.title.innerText=e}async handlePopState(){
// To Be Implemented
}setABSPath(e="/"){e="/"!=e.substr(-1)?e+"/":e,this.abspath=e.trim()}async to(e,t="none",r="none",o=!1){try{topbar&&this.usingTopBar&&topbar.show(),this.mostCurrentRoute=("none"==t?e:t)+"?routed=true",this.app=document.getElementsByTagName("routable")[0],this.title=document.getElementsByTagName("title")[0],window.onpopstate=this.handlePopState;await fetch(("none"==t?e:t)+"?routed=true").then((async t=>{let n=await t.text(),a=this.parser.parseFromString(n,"text/html").getElementsByTagName("routable")[0];if(this.app.innerHTML=a.innerHTML,this.changeTitle("none"==r?a.getAttribute("title"):r),o?history.replaceState({prevUrl:window.location.href},"",e):history.pushState({prevUrl:window.location.href},"",e),this.app.setAttribute("title",a.getAttribute("title")),a.getAttribute("script")){let e=a.getAttribute("script");this.app.setAttribute("script",e);let t=this.parser.parseFromString(a.innerHTML,"text/html").getElementById(e),r=document.createElement("SCRIPT");r.innerHTML=t.innerHTML,document.querySelectorAll("script").forEach(((e,t)=>{e.parentNode.removeChild(e)})),document.body.appendChild(r),
// Remove Scripts From <routable> and append to body
t.parentNode.removeChild(t),this.app.querySelectorAll("script").forEach(((e,t)=>{e.parentNode.removeChild(e)})),document.querySelectorAll("direct").forEach(((e,t)=>{e.parentNode.removeChild(e)}))}if(a.getAttribute("css")){
// CSS Append to Head Element
let e=a.getAttribute("css");this.app.setAttribute("css",e);let t=this.parser.parseFromString(a.innerHTML,"text/html").getElementById(e),r=document.createElement("STYLE");r.innerHTML=t.innerHTML.trim(),this.emptyStyles(),document.querySelector("route-styles").appendChild(r),t.parentNode.removeChild(t),this.app.querySelectorAll("style").forEach(((e,t)=>{e.parentNode.removeChild(e)}))}})).then((()=>{window.topbar&&this.usingTopBar&&window.topbar.hide(),this.domLoadedProcesses(),this.events.onNavigate&&this.events.onNavigate()}))}catch(e){this.production||console.error(e)}}async home(){await this.to(this.abspath)}async replace(e,t="none",r=""){await this.to(e,t,r,!0)}}
//# sourceMappingURL=vanillarouter.min.js.map